<main class="content">

  <h2>Manage Selections</h2>

  <ul>
    <li *ngFor="let sel of selectionList">
      <strong>Selection #{{ sel.id }}</strong>
      by {{ sel.userName }} | Created: {{ sel.creationDate | date:'short' }}
      | Drinks: {{ sel.drinkCount }}
      | <span [ngClass]="sel.isActive ? 'active' : 'inactive'">
        {{ sel.isActive ? 'Active' : 'Inactive' }}
      </span>
      <button (click)="toggleSelectionList(sel.id)">
        Toggle Active
      </button>
      <button (click)="removeSelection(sel.id)">Delete</button>
    </li>
  </ul>


  <h2>Selected Drinks</h2>
  <div *ngFor="let drink of selectedDrinks">
    <strong>{{ drink.strDrink }}</strong>
  </div>
  <button (click)="submitSelection()">Submit Selection</button>

  <h2>Choose drinks to add to the men√π</h2>

  <!--searchbar-->
  <form [formGroup]="searchForm" class="search-bar">
    <input type="text" formControlName="query" placeholder="Search for a drink..." />

    <select formControlName="category">
      <option value="">All Categories</option>
      <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
    </select>

    <select formControlName="ingredient">
      <option value="">All Ingredients</option>
      <option *ngFor="let ingredient of ingredients" [value]="ingredient">{{ ingredient }}</option>
    </select>

    <select formControlName="glass">
      <option value="">All Glasses</option>
      <option *ngFor="let glass of glasses" [value]="glass">{{ glass }}</option>
    </select>
  </form>

  <!-- versione alternativa dei risultati-->
  <!--<div class="drink-container">
    <div class="drink-card" *ngFor="let drink of drinks" (click)="toggleSelection(drink)" [class.selected]="isSelected(drink)">
      <img [src]="drink.strDrinkThumb" alt="{{ drink.strDrink }}" />
      <h3>{{ drink.strDrink }}</h3>
    </div>
  </div>-->


  <div class="info-message" *ngIf="isRandomSelection && !searchUsed">
    <p>Don't know what to choose? Here's a random selection:</p>
  </div>

  <div class="info-message" *ngIf="noSearchResults">
    <p>No results found for your search.</p>
  </div>


  <!-- Main List of Drinks from API -->
  <div class="drink-container">
    <p-card header="{{ cocktail.strDrink }}" class="drink-card" *ngFor="let cocktail of drinks">
      <img [src]="cocktail.strDrinkThumb" alt="{{ cocktail.strDrink }}" />
      <ul class="ingredient-list">
        <li *ngFor="let ing of cocktail.ingredients">
          {{ ing.measure }} {{ ing.ingredient }}
        </li>
      </ul>
      <button (click)="toggleSelection(cocktail)">
        {{ isSelected(cocktail) ? 'Remove' : 'Select' }}
      </button>
    </p-card>
  </div>


</main>
